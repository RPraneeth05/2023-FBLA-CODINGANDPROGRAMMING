<!DOCTYPE html>
<html>

<head>
    <title>School Tracker</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
        }

        th {
            background-color: #f2f2f2;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .add-school-form {
            margin-bottom: 10px;
        }

        .add-school-form input[type="text"],
        .add-school-form select {
            margin-right: 10px;
        }
    </style>
</head>

<body>
    <h1>School Tracker</h1>

    <div class="add-school-form">
        <select required id="state">
            <option value="">Select a state</option>
            <option value="AL">Alabama</option>
            <option value="AK">Alaska</option>
            <option value="AZ">Arizona</option>
            <option value="AR">Arkansas</option>
            <option value="CA">California</option>
            <option value="CO">Colorado</option>
            <option value="CT">Connecticut</option>
            <option value="DE">Delaware</option>
            <option value="FL">Florida</option>
            <option value="GA">Georgia</option>
            <option value="HI">Hawaii</option>
            <option value="ID">Idaho</option>
            <option value="IL">Illinois</option>
            <option value="IN">Indiana</option>
            <option value="IA">Iowa</option>
            <option value="KS">Kansas</option>
            <option value="KY">Kentucky</option>
            <option value="LA">Louisiana</option>
            <option value="ME">Maine</option>
            <option value="MD">Maryland</option>
            <option value="MA">Massachusetts</option>
            <option value="MI">Michigan</option>
            <option value="MN">Minnesota</option>
            <option value="MS">Mississippi</option>
            <option value="MO">Missouri</option>
            <option value="MT">Montana</option>
            <option value="NE">Nebraska</option>
            <option value="NV">Nevada</option>
            <option value="NH">New Hampshire</option>
            <option value="NJ">New Jersey</option>
            <option value="NM">New Mexico</option>
            <option value="NY">New York</option>
            <option value="NC">North Carolina</option>
            <option value="ND">North Dakota</option>
            <option value="OH">Ohio</option>
            <option value="OK">Oklahoma</option>
            <option value="OR">Oregon</option>
            <option value="PA">Pennsylvania</option>
            <option value="RI">Rhode Island</option>
            <option value="SC">South Carolina</option>
            <option value="SD">South Dakota</option>
            <option value="TN">Tennessee</option>
            <option value="TX">Texas</option>
            <option value="UT">Utah</option>
            <option value="VT">Vermont</option>
            <option value="VA">Virginia</option>
            <option value="WA">Washington</option>
            <option value="WV">West Virginia</option>
            <option value="WI">Wisconsin</option>
            <option value="WY">Wyoming</option>
        </select>

        <input required type="text" id="school-name" placeholder="School Name">
        <button onclick="addSchool()">Add School</button>
    </div>

    <table id="school-table">
        <thead>
            <tr>
                <th>State</th>
                <th>School</th>
                <th># of Students</th>
                <th>Date Added</th>
            </tr>
        </thead>
        <tbody>
            <!-- Existing school data will be added dynamically here -->
        </tbody>
    </table>
    <!-- Add the Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>

    <!-- Add the Firestore library -->
    <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js"></script>
    <script>
        import { initializeApp } from "firebase/app";
        import { getFirestore } from "firebase/firestore";

        // TODO: Replace the following with your app's Firebase project configuration
        // See: https://support.google.com/firebase/answer/7015592
        const firebaseConfig = {
            apiKey: "AIzaSyCLNPivvfkCLt2LHab6DiFiM-7OFqZxf0U",
            authDomain: "eventhive-5be50.firebaseapp.com",
            projectId: "eventhive-5be50",
            storageBucket: "eventhive-5be50.appspot.com",
            messagingSenderId: "926017110848",
            appId: "1:926017110848:web:14c68755a5851ffd5fb0a5",
            measurementId: "G-P9CY3LVP8D"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);


        // Initialize Cloud Firestore and get a reference to the service
        const db = getFirestore(app);

    </script>

    <script>
        async function addSchool() {
            let state = document.getElementById("state");
            let school = document.getElementById("school-name");

            try {
                const docRef = await addDoc(collection(db, "schools"), {
                    school: school.value,
                    state: state.value,
                    dateCreated: new Date(),
                    studentCount: 0
                });
                docRef.collection('events');
                console.log("Document written with ID: ", docRef.id);
            } catch (e) {
                console.error("Error adding document: ", e);
            }
        }
    </script>
</body>

</html>